<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§  Advanced AI Recommendation System - ØªØ¬Ø±Ø¨Ø© Ù…ØªÙ‚Ø¯Ù…Ø©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 3em;
            margin-bottom: 15px;
            font-weight: 900;
        }

        .features-list {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .feature-badge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9em;
            font-weight: bold;
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 1400px) {
            .main-grid {
                grid-template-columns: 1fr 2fr;
            }

            .stats-panel {
                grid-column: 1 / -1;
            }
        }

        @media (max-width: 992px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Panels */
        .panel {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }

        .panel-header h2 {
            color: #667eea;
            font-size: 1.5em;
        }

        /* Users Panel */
        .user-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid #667eea;
        }

        .user-card:hover {
            transform: translateX(-5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .user-card.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .user-name {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 8px;
        }

        .user-interests {
            font-size: 0.85em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .user-stats {
            display: flex;
            gap: 15px;
            font-size: 0.8em;
            margin-top: 10px;
        }

        /* Recommendations */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border-left: 6px solid #667eea;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .product-card:hover::before {
            opacity: 1;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .category-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .score-badge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .product-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin: 12px 0;
        }

        .product-tags {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin: 12px 0;
        }

        .tag {
            background: #e9ecef;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 0.8em;
            color: #495057;
        }

        .reason-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            margin-top: 10px;
        }

        .reason-trending {
            background: #ffd700;
            color: #856404;
        }

        .reason-quality {
            background: #d4edda;
            color: #155724;
        }

        .reason-similar {
            background: #d1ecf1;
            color: #0c5460;
        }

        /* Stats Panel */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            border-radius: 12px;
            color: white;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: 900;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }

        /* Action Buttons */
        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .empty-icon {
            font-size: 4em;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        /* AI Learning Indicator */
        .learning-indicator {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.02);
            }
        }

        .learning-icon {
            font-size: 2em;
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        /* Context Info */
        .context-info {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .context-info strong {
            color: #856404;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ§  Advanced AI Recommendation System</h1>
            <p style="font-size: 1.2em; color: #666; margin-bottom: 20px;">
                Ù†Ø¸Ø§Ù… ØªÙˆØµÙŠØ§Øª Ù…ØªÙ‚Ø¯Ù… - ÙŠØªØ¹Ù„Ù… Ù…Ù† Ø³Ù„ÙˆÙƒ Ø§Ù„Ø²Ø¨Ø§Ø¦Ù† ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            </p>

            <div class="features-list">
                <span class="feature-badge">ğŸ¯ Collaborative Filtering</span>
                <span class="feature-badge">ğŸ“Š Content-Based</span>
                <span class="feature-badge">â° Time Decay</span>
                <span class="feature-badge">ğŸ”¥ Trending</span>
                <span class="feature-badge">ğŸ¨ Diversity</span>
                <span class="feature-badge">ğŸ² Serendipity</span>
                <span class="feature-badge">ğŸŒ Context-Aware</span>
            </div>
        </div>

        <!-- AI Learning Indicator -->
        <div class="learning-indicator" id="learningIndicator" style="display: none;">
            <div class="learning-icon">ğŸ§ </div>
            <div>
                <strong>AI ÙŠØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù†...</strong><br>
                <span id="learningText">Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ùˆ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</span>
            </div>
        </div>

        <!-- Context Info -->
        <div class="context-info" id="contextInfo">
            <strong>ğŸ“ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø§Ù„Ø­Ø§Ù„ÙŠ:</strong>
            <span id="contextText">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
        </div>

        <!-- Stats -->
        <div class="panel">
            <div class="panel-header">
                <h2>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
                <button class="btn btn-secondary" onclick="loadStats()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>
            </div>
            <div class="stats-grid" id="statsGrid">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Users Panel -->
            <div class="panel">
                <div class="panel-header">
                    <h2>ğŸ‘¥ Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†</h2>
                </div>
                <div id="usersList">
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>

            <!-- Recommendations Panel -->
            <div class="panel">
                <div class="panel-header">
                    <h2 id="recommendationsTitle">âœ¨ Ø§Ù„ØªÙˆØµÙŠØ§Øª</h2>
                    <div class="actions">
                        <button class="btn btn-primary" onclick="simulateInteraction()" id="interactBtn"
                            style="display: none;">
                            ğŸ›’ Ù…Ø­Ø§ÙƒØ§Ø© Ø´Ø±Ø§Ø¡
                        </button>
                        <button class="btn btn-secondary" onclick="loadRecommendations()">
                            ğŸ”„ ØªØ­Ø¯ÙŠØ«
                        </button>
                    </div>
                </div>
                <div id="recommendationsArea">
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ¯</div>
                        <p>Ø§Ø®ØªØ± Ø²Ø¨ÙˆÙ†Ø§Ù‹ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØµÙŠØ§Øª</p>
                    </div>
                </div>
            </div>

            <!-- Activity Log -->
            <div class="panel">
                <div class="panel-header">
                    <h2>ğŸ“ Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·</h2>
                </div>
                <div id="activityLog" style="max-height: 600px; overflow-y: auto;">
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“Š</div>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ø´Ø·Ø© Ø¨Ø¹Ø¯</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let activityLog = [];

        // Initialize
        async function init() {
            updateContext();
            await loadDemo();
            await loadStats();

            // Update context every minute
            setInterval(updateContext, 60000);
        }

        // Update context info
        function updateContext() {
            const now = new Date();
            const hour = now.getHours();
            const day = now.getDay();
            const isWeekend = day === 0 || day === 6;

            let timeOfDay = '';
            if (hour >= 6 && hour < 12) timeOfDay = 'ğŸŒ… ØµØ¨Ø§Ø­';
            else if (hour >= 12 && hour < 17) timeOfDay = 'â˜€ï¸ Ø¸Ù‡ÙŠØ±Ø©';
            else if (hour >= 17 && hour < 21) timeOfDay = 'ğŸŒ† Ù…Ø³Ø§Ø¡';
            else timeOfDay = 'ğŸŒ™ Ù„ÙŠÙ„';

            const weekend = isWeekend ? 'ğŸ“… Ø¹Ø·Ù„Ø©' : 'ğŸ“… ÙŠÙˆÙ… Ø¹Ù…Ù„';

            document.getElementById('contextText').innerHTML =
                `${timeOfDay} | ${weekend} | Ø§Ù„Ø³Ø§Ø¹Ø© ${hour}:00 (AI ÙŠØ³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ ÙÙŠ Ø§Ù„ØªÙˆØµÙŠØ§Øª)`;
        }

        // Load demo data
        async function loadDemo() {
            showLearning('ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©...');

            // Simulate loading
            await sleep(1000);

            const users = [
                {
                    id: 'ahmed',
                    name: 'Ø£Ø­Ù…Ø¯',
                    interests: ['Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª', 'ÙƒÙ…Ø¨ÙŠÙˆØªØ±', 'ØªÙ‚Ù†ÙŠØ©'],
                    viewed: 5,
                    purchased: 2
                },
                {
                    id: 'sara',
                    name: 'Ø³Ø§Ø±Ø©',
                    interests: ['Ù…Ù„Ø§Ø¨Ø³', 'Ù…ÙˆØ¶Ø©', 'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª'],
                    viewed: 8,
                    purchased: 3
                },
                {
                    id: 'omar',
                    name: 'Ø¹Ù…Ø±',
                    interests: ['ÙƒØªØ¨', 'Ø¨Ø±Ù…Ø¬Ø©', 'ØªØ¹Ù„ÙŠÙ…'],
                    viewed: 12,
                    purchased: 5
                },
                {
                    id: 'fatima',
                    name: 'ÙØ§Ø·Ù…Ø©',
                    interests: ['Ø±ÙŠØ§Ø¶Ø©', 'ØµØ­Ø©', 'Ù„ÙŠØ§Ù‚Ø©'],
                    viewed: 6,
                    purchased: 1
                }
            ];

            displayUsers(users);
            hideLearning();

            addLog('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ 4 Ø²Ø¨Ø§Ø¦Ù†');
        }

        // Display users
        function displayUsers(users) {
            const html = users.map(user => `
                <div class="user-card" onclick="selectUser('${user.id}', '${user.name}')">
                    <div class="user-name">${user.name}</div>
                    <div class="user-interests">
                        ${user.interests.slice(0, 3).join(' â€¢ ')}
                    </div>
                    <div class="user-stats">
                        <span>ğŸ‘ï¸ ${user.viewed} Ù…Ø´Ø§Ù‡Ø¯Ø©</span>
                        <span>ğŸ›’ ${user.purchased} Ù…Ø´ØªØ±Ù‰</span>
                    </div>
                </div>
            `).join('');

            document.getElementById('usersList').innerHTML = html;
        }

        // Select user
        function selectUser(userId, userName) {
            currentUser = userId;

            // Update active state
            document.querySelectorAll('.user-card').forEach(card => {
                card.classList.remove('active');
            });
            event.target.closest('.user-card').classList.add('active');

            // Update title
            document.getElementById('recommendationsTitle').textContent =
                `âœ¨ ØªÙˆØµÙŠØ§Øª Ù„Ù€ ${userName}`;

            // Show interaction button
            document.getElementById('interactBtn').style.display = 'inline-block';

            // Load recommendations
            loadRecommendations();

            addLog(`ğŸ‘¤ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± ${userName}`);
        }

        // Load recommendations
        async function loadRecommendations() {
            if (!currentUser) return;

            const area = document.getElementById('recommendationsArea');
            area.innerHTML = '<div class="loading"><div class="spinner"></div><p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©...</p></div>';

            showLearning('Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ...');

            // Simulate AI processing
            await sleep(1500);

            // Generate mock recommendations
            const recommendations = generateRecommendations(currentUser);

            displayRecommendations(recommendations);
            hideLearning();

            addLog(`âœ¨ ØªÙ… ØªÙˆÙ„ÙŠØ¯ ${recommendations.length} ØªÙˆØµÙŠØ©`);
        }

        // Generate mock recommendations
        function generateRecommendations(userId) {
            const products = {
                'ahmed': [
                    { id: 'laptop_001', title: 'Ù„Ø§Ø¨ØªÙˆØ¨ Dell Gaming', category: 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª', tags: ['laptop', 'gaming', 'dell'], score: 0.95, reason: 'similar' },
                    { id: 'mouse_001', title: 'Ù…Ø§ÙˆØ³ Logitech Gaming', category: 'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª', tags: ['mouse', 'gaming'], score: 0.89, reason: 'similar' },
                    { id: 'keyboard_001', title: 'ÙƒÙŠØ¨ÙˆØ±Ø¯ Ù…ÙŠÙƒØ§Ù†ÙŠÙƒÙŠ', category: 'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª', tags: ['keyboard', 'mechanical'], score: 0.85, reason: 'quality' },
                    { id: 'monitor_001', title: 'Ø´Ø§Ø´Ø© 27 Ø¨ÙˆØµØ©', category: 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª', tags: ['monitor', 'display'], score: 0.78, reason: 'trending' }
                ],
                'sara': [
                    { id: 'dress_001', title: 'ÙØ³ØªØ§Ù† ØµÙŠÙÙŠ', category: 'Ù…Ù„Ø§Ø¨Ø³', tags: ['dress', 'summer'], score: 0.92, reason: 'similar' },
                    { id: 'shoes_001', title: 'Ø­Ø°Ø§Ø¡ Nike', category: 'Ø£Ø­Ø°ÙŠØ©', tags: ['shoes', 'nike'], score: 0.88, reason: 'quality' },
                    { id: 'bag_001', title: 'Ø­Ù‚ÙŠØ¨Ø© ÙŠØ¯', category: 'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª', tags: ['bag', 'handbag'], score: 0.82, reason: 'similar' },
                    { id: 'sunglasses_001', title: 'Ù†Ø¸Ø§Ø±Ø§Øª Ø´Ù…Ø³ÙŠØ©', category: 'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª', tags: ['sunglasses'], score: 0.75, reason: 'trending' }
                ],
                'omar': [
                    { id: 'book_python', title: 'ÙƒØªØ§Ø¨ Python Ø§Ù„Ù…ØªÙ‚Ø¯Ù…', category: 'ÙƒØªØ¨', tags: ['python', 'programming'], score: 0.96, reason: 'quality' },
                    { id: 'book_web', title: 'ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ«', category: 'ÙƒØªØ¨', tags: ['web', 'javascript'], score: 0.90, reason: 'similar' },
                    { id: 'course_001', title: 'Ø¯ÙˆØ±Ø© AI', category: 'ØªØ¹Ù„ÙŠÙ…', tags: ['ai', 'course'], score: 0.85, reason: 'trending' },
                    { id: 'book_algo', title: 'Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª ÙˆØ¨Ù†Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', category: 'ÙƒØªØ¨', tags: ['algorithms', 'data'], score: 0.80, reason: 'quality' }
                ],
                'fatima': [
                    { id: 'yoga_mat', title: 'Ø¨Ø³Ø§Ø· ÙŠÙˆØºØ§', category: 'Ø±ÙŠØ§Ø¶Ø©', tags: ['yoga', 'fitness'], score: 0.93, reason: 'similar' },
                    { id: 'weights_001', title: 'Ø£ÙˆØ²Ø§Ù† Ø±ÙŠØ§Ø¶ÙŠØ©', category: 'Ø±ÙŠØ§Ø¶Ø©', tags: ['weights', 'fitness'], score: 0.87, reason: 'quality' },
                    { id: 'protein_001', title: 'Ø¨Ø±ÙˆØªÙŠÙ† Ø·Ø¨ÙŠØ¹ÙŠ', category: 'ØµØ­Ø©', tags: ['protein', 'health'], score: 0.83, reason: 'trending' },
                    { id: 'tracker_001', title: 'Ø³Ø§Ø¹Ø© Ø±ÙŠØ§Ø¶ÙŠØ©', category: 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª', tags: ['fitness', 'tracker'], score: 0.78, reason: 'similar' }
                ]
            };

            return products[userId] || [];
        }

        // Display recommendations
        function displayRecommendations(recommendations) {
            const html = `
                <div class="product-grid">
                    ${recommendations.map(product => `
                        <div class="product-card" onclick="viewProduct('${product.id}', '${product.title}')">
                            <div class="product-header">
                                <div class="category-badge">${product.category}</div>
                                <div class="score-badge">${(product.score * 100).toFixed(0)}%</div>
                            </div>
                            <div class="product-title">${product.title}</div>
                            <div class="product-tags">
                                ${product.tags.map(tag => `<span class="tag">#${tag}</span>`).join('')}
                            </div>
                            <span class="reason-badge reason-${product.reason}">
                                ${getReasonText(product.reason)}
                            </span>
                        </div>
                    `).join('')}
                </div>
            `;

            document.getElementById('recommendationsArea').innerHTML = html;
        }

        // Get reason text
        function getReasonText(reason) {
            const reasons = {
                'similar': 'ğŸ¯ Ù…Ø´Ø§Ø¨Ù‡ Ù„Ù…Ø§ Ø£Ø¹Ø¬Ø¨Ùƒ',
                'quality': 'â­ Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©',
                'trending': 'ğŸ”¥ Ø±Ø§Ø¦Ø¬ Ø§Ù„Ø¢Ù†'
            };
            return reasons[reason] || 'Ù…ÙˆØµÙ‰ Ø¨Ù‡';
        }

        // View product
        function viewProduct(productId, productTitle) {
            showLearning('AI ÙŠØ³Ø¬Ù„ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©...');

            setTimeout(() => {
                hideLearning();
                addLog(`ğŸ‘ï¸ ${productTitle} - ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©`);
            }, 500);
        }

        // Simulate interaction
        async function simulateInteraction() {
            if (!currentUser) return;

            showLearning('Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø´Ø±Ø§Ø¡...');

            await sleep(1000);

            addLog(`ğŸ›’ ØªÙ… Ù…Ø­Ø§ÙƒØ§Ø© Ø´Ø±Ø§Ø¡ Ù…Ù†ØªØ¬ - AI ÙŠØªØ¹Ù„Ù…!`);

            showLearning('AI ÙŠØ­Ø¯Ø« Ø§Ù„Ù†Ù…Ø§Ø°Ø¬...');

            await sleep(1000);

            hideLearning();

            addLog(`ğŸ§  AI ØªØ¹Ù„Ù… Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø³Ù„ÙˆÙƒ`);

            // Reload recommendations
            loadRecommendations();
        }

        // Load stats
        async function loadStats() {
            const html = `
                <div class="stat-card">
                    <div class="stat-number">4</div>
                    <div class="stat-label">Ø²Ø¨Ø§Ø¦Ù† Ù†Ø´Ø·ÙŠÙ†</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">16</div>
                    <div class="stat-label">Ù…Ù†ØªØ¬Ø§Øª</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">21</div>
                    <div class="stat-label">ØªÙØ§Ø¹Ù„Ø§Øª</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">11</div>
                    <div class="stat-label">Ù…Ø´ØªØ±ÙŠØ§Øª</div>
                </div>
            `;

            document.getElementById('statsGrid').innerHTML = html;
        }

        // Show learning indicator
        function showLearning(text) {
            document.getElementById('learningText').textContent = text;
            document.getElementById('learningIndicator').style.display = 'flex';
        }

        // Hide learning indicator
        function hideLearning() {
            document.getElementById('learningIndicator').style.display = 'none';
        }

        // Add to activity log
        function addLog(message) {
            const time = new Date().toLocaleTimeString('ar-EG');
            activityLog.unshift({ time, message });

            const html = activityLog.slice(0, 20).map(log => `
                <div style="padding: 10px; border-bottom: 1px solid #e9ecef;">
                    <strong style="color: #667eea;">${log.time}</strong><br>
                    ${log.message}
                </div>
            `).join('');

            document.getElementById('activityLog').innerHTML = html ||
                '<div class="empty-state"><div class="empty-icon">ğŸ“Š</div><p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ø´Ø·Ø© Ø¨Ø¹Ø¯</p></div>';
        }

        // Utility
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Start
        init();
    </script>
</body>

</html>